% this style was created by Horea Christian and is basted on the ETH ZÃ¼rich corporate design color palette https://www.ethz.ch/services/en/service/communication/corporate-design/colour.html
\ProvidesPackage{beamerthemeZH}

% \usepackage{graphics}
\usepackage{graphicx}
\newcommand{\vcenteredinclude}[1]{\begingroup
\setbox0=\hbox{\includegraphics[width=.8\textwidth, height=.06\paperheight, keepaspectratio]{#1}}%
\parbox{\wd0}{\box0}\endgroup}


\usepackage{calc}
\newlength{\mylength}

\mode<presentation>

\definecolor{ETH1}{RGB}{31,64,122}
\definecolor{ETH3}{RGB}{0,105,180}
\definecolor{ETH6}{RGB}{111,111,110}
\definecolor{ETH8}{RGB}{0,122,146}
\definecolor{ETH10}{RGB}{130,190,30} % GREEN
\definecolor{tlg}{RGB}{230,230,230}

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{filter discard warning=false}
\pgfplotsset{
    discard if/.style 2 args={
        x filter/.append code={
            \edef\tempa{\thisrow{#1}}
            \edef\tempb{#2}
            \ifx\tempa\tempb
                \def\pgfmathresult{inf}
            \fi
        }
    },
    discard if not/.style 2 args={
        x filter/.append code={
            \edef\tempa{\thisrow{#1}}
            \edef\tempb{#2}
            \ifx\tempa\tempb
            \else
                \def\pgfmathresult{inf}
            \fi
        }
    }
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%It seems many of the following entries do not control any visible Behaviour. All such entries are
%set to red, so that they are easy to spot if they ever become visible

\setbeamercolor{headline}{fg=red,bg=ETH3} % This is the recommended color for Specialist community usage: change to ETH1 for general communication
\setbeamercolor{footline}{fg=red, bg=red}
\setbeamerfont{footline}{size=\large,series=\bf}
\setbeamercolor{separation line}{bg=ETH3}
\setbeamercolor{title in headline}{fg=white}
\setbeamercolor{author in headline}{fg=white}
\setbeamercolor{institute in headline}{fg=white}

\setbeamercolor{framesubtitle}{fg=red, bg=ta2gray}
\setbeamercolor{author in head/foot}{fg=white, bg=ETH3}
\setbeamercolor{title in head/foot}{fg=red, bg=red}

\setbeamercolor*{normal text}{fg=ETH6, bg=tlg}
\setbeamercolor*{block body}{fg=black, bg=white}
\setbeamercolor*{block title}{fg=white,bg=ETH3}
\setbeamerfont{block title}{size=\large,series=\bf}
\setbeamercolor{upper separation line head}{fg=red}

\setbeamercolor*{example body}{fg=red,bg=red}
\setbeamercolor*{example text}{fg=red,bg=red}
\setbeamercolor*{example title}{bg=red,fg=red}

\setbeamercolor{alerted text}{fg=red}
\setbeamercolor{structure}{fg=ETH1}

\setbeamertemplate{itemize items}{\color{ETH10}$\blacktriangleright$}
\setbeamertemplate{navigation symbols}{}  % no navigation on a poster

\newenvironment<>{myblock}[1]{%
	\begin{actionenv}#2%
	\def\insertblocktitle{\centering#1}%
	\par%
	\usebeamertemplate{block begin}\leftskip=14pt\rightskip=14pt\vspace{10pt}}
	{\par\vspace{1em}\usebeamertemplate{block end}
	\end{actionenv}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% !!! This environment can't both have nice margins AND display the contained text as justified:
% We preferentially use the above but keep this one just-in-case
\setbeamertemplate{block begin}{
	\setlength{\mylength}{\textwidth+2ex}%
	\vskip2ex
	\begin{beamercolorbox}[ht=2.8ex,dp=2ex, wd=\textwidth, center,rounded=false,shadow=false,leftskip=1cm,colsep*=0ex]{block title}%
		\usebeamerfont*{block title}\centering \insertblocktitle
	\end{beamercolorbox}%
	{\ifbeamercolorempty[bg]{block body}{}{\nointerlineskip\vskip-0.5ex}}%
	\usebeamerfont{block body}%
	\begin{beamercolorbox}[rounded=false,shadow=false,center,wd=\textwidth,]{block body}%
		\ifbeamercolorempty[bg]{block body}\vbox{}%
	\begin{minipage}{0.96\textwidth}\vbox{}%
		\justify
		}
\setbeamertemplate{block end}{
	\end{minipage}
	\end{beamercolorbox}
	}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setbeamertemplate{headline}{
	\leavevmode
	\begin{beamercolorbox}[wd=\paperwidth]{headline}
		\begin{columns}[c]
			\begin{column}{.075\paperwidth}
			\end{column}
			\begin{column}{.625\paperwidth}
				\flushleft
				\usebeamercolor{title in headline}{\color{fg}\textbf{\Huge{\inserttitle}}\\[1.5ex]}
				\usebeamercolor{author in headline}{\color{fg}\Large{\insertauthor}\\[1ex]}
				\usebeamercolor{institute in headline}{\color{fg}\large{\insertinstitute}\\[1ex]}
			\end{column}

			\begin{column}{.3\paperwidth}
				\begin{center}
					\includegraphics[width=1\textwidth, keepaspectratio]{logo4.png}
				\end{center}
			\end{column}
			\begin{column}{.05\paperwidth}
			\end{column}
		\end{columns}
	\end{beamercolorbox}

 	\begin{beamercolorbox}[wd=\paperwidth]{lower separation line head}
		\rule{0pt}{2pt}
	\end{beamercolorbox}
	%\vskip-2cm
	}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setbeamertemplate{footline}{

	}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% POSTER SPECIFIC 

%%%% DIAGRAMS
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, arrows}

\tikzstyle{data} = [rectangle, rounded corners, text width=3.5cm, minimum height=1cm,text centered, draw=black, fill=red!30]
\tikzstyle{process} = [rectangle, text width=3cm, minimum height=1cm, text centered, draw=black, fill=blue!30]
\tikzstyle{arrow} = [thick,->,>=stealth]




%%%% GRAPHS
% Line graphs
\newcommand{\foneidentplot}[5] {
\addplot+[mark=none,
	discard if not={Method}{#1},
	discard if not={Model}{#2},
	discard if not={Category}{#3},
	discard if not={HistThreshold}{#4}
] table [x=LabelThreshold, y=F1, col sep=comma] {identification.csv};
\addlegendentry{#5}
}


% #1 - Model
% #2 - Histogram threshold
% #3 - Legend label
\newcommand{\foneidentgraph}[3]{
\begin{tikzpicture}
\begin{axis}[
	title = {\textbf{F1 score with #1 model}},
	legend pos=outer north east,
	legend style={
		column sep=1ex,
		xshift=1cm
	},
	legend entries={
		Graph method on mature lobsters;,
		Label method on mature lobsters;,
		Graph method on juvenile lobsters;,
		Label method on juvenile lobsters
	},
	legend to name=#3,
	legend columns=2,
%	line width=2pt,
	xlabel={Label threshold},
	xmin=0,xmax=1,
	xmode=log,
	ylabel={F1 score},
	ymin=0,ymax=1,
	y label style={yshift={0.5cm}}
]

\foneidentplot{graph}{#1}{mature}{#2}{Graph method, mature lobsters}
\foneidentplot{model}{#1}{mature}{#2}{Label method, mature lobsters}
\foneidentplot{graph}{#1}{juvenile}{#2}{Graph method, juvenile lobsters}
\foneidentplot{model}{#1}{juvenile}{#2}{Label method, juvenile lobsters}
\end{axis}
\end{tikzpicture}
}



% Bar graphs
\newcommand{\doublebargraph}[1]{
\begin{minipage}{0.48\textwidth}
\begin{tikzpicture}
\begin{axis}[
    ybar,
    title={\textbf{Classification for juvenile lobsters}},
    bar width=1em,
    enlarge x limits=0.4,
    legend columns=-1,
    legend entries = {
	  Correct,
	  Incorrect,
	  Undetected    
    },
    legend style={
	  column sep=1ex  
    },
    legend image post style={yshift=-0.05cm},
    legend to name=#1,
    ylabel={Classification rate},
    y label style={yshift=0.5cm},
    symbolic x coords={Graph method,Label method},
    xtick=data,
    ymajorgrids=true, 
]
\addplot coordinates {(Graph method, 0.48) (Label method, 0.48)};
%\addlegendentry{Correct}

\addplot coordinates {(Graph method, 0.42) (Label method, 0.42)};
%\addlegendentry{Incorrect}

\addplot coordinates {(Graph method, 0.09) (Label method, 0.09)};
%\addlegendentry{Undetected}
\end{axis}
\end{tikzpicture}
\end{minipage}
\hspace*{\fill}
\begin{minipage}{0.48\textwidth}
\begin{tikzpicture}
\begin{axis}[
    ybar,
    title={\textbf{Classification for mature lobsters}},
    bar width=1em,
    enlarge x limits=0.4,
    y label style={yshift=0.5cm},
    ylabel={Classification rate},
    symbolic x coords={Graph method,Label method},
    xtick=data,
    ymajorgrids=true, 
]
\addplot coordinates {(Graph method, 0.51) (Label method, 0.52)};
%\addlegendentry{Correct}

\addplot coordinates {(Graph method, 0.06) (Label method, 0.046)};
%\addlegendentry{Incorrect}

\addplot coordinates {(Graph method, 0.42) (Label method, 0.42)};
%\addlegendentry{Undetected}
\end{axis}
\end{tikzpicture}
\end{minipage}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Display a grid to help align images ... and it looks nice with this color scheme
% \beamertemplategridbackground[1cm]

%Some beamer customizations:
\setbeamertemplate{bibliography item}[text]
%\setbeamertemplate{caption}[numbered]{}% Number float-like environments

\mode<all>